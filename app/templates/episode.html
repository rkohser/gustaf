{% macro episode_tr(episode, languages, is_watching) -%}
<tr>
    <td>
        <b>{{episode['show_name'].title()}} {{episode['season_number']}}x{{episode['episode_number']}}</b>
    </td>
    <td>
        <button type="button" class="btn btn-primary" onclick="gustaf.play({{ episode['id'] }})">
            <span class="glyphicon glyphicon-play"></span>
        </button>
    </td>
    <td>
        {% for language in languages %}
        {% if language in episode['subtitles'] %}
        {% set sub_state = "btn-success" %}
        {% else %}
        {% set sub_state = "btn-danger" %}
        {% endif %}
        <button id="sub_episode_{{ episode['id'] }}_{{language}}" type="button" class="btn {{sub_state}}"
                onclick="gustaf.get_subtitles({{ episode['id'] }}, '{{language}}')">
            <span class="glyphicon glyphicon-subtitles"></span><b> {{language}}</b>
        </button>
        {% endfor %}
    </td>
    <td>
        {% if is_watching %}
        {% set episode_progress = episode['current_time'] / episode['total_time'] * 100.0 %}
        {% else %}
        {% set episode_progress = 100.0 %}
        {% endif %}
        <a href="#" onclick="gustaf.toggleEpisodeState($(this), {{ episode['id'] }});return false;">
            <div class="progress">
                <div id="progress_episode_{{ episode['id'] }}"
                     class="progress-bar progress-bar-{{ episode['episode_state'].label }}" role="progressbar"
                     aria-valuenow="{{episode_progress}}"
                     aria-valuemin="0" aria-valuemax="100" style="width: {{episode_progress}}%">
                </div>
            </div>
        </a>
    </td>
</tr>
{%- endmacro %}