{% from model import PlayState %}
{% for season in seasons %}
<h1>Season {{ escape(str(season.season_number)) }}</h1>
<table class="table table-hover">
    <thead>
    <tr>
        <td></td>
        <td>
            {% if season.state_count == 1 %}
            {% set season_state = PlayState.from_num( season.state ) %}
            {% else %}
            {% set season_state = PlayState.WATCHING %}
            {% end %}
            <a id="state_season_{{ season.id }}"
               class="label label-{{ season_state.label }}"
               href="#"
               onclick="gustaf.toggleSeasonState($(this), {{ season.id }});return false;">{{ season_state.text }}</a>
        </td>
    </tr>
    </thead>
    {% for episode in season.episodes %}
    <tr>
        <td>
            <a href="javascript:gustaf.play({{ episode.id }})">{{ episode.path }}</a>
        </td>
        <td>
            <a id="state_episode_{{ episode.id }}" class="label label-{{ episode.episode_state.label }}" href="#"
               onclick="gustaf.toggleEpisodeState($(this), {{ episode.id }});return false;">{{
                episode.episode_state.text}}</a>
        </td>
    </tr>
    {% end %}
</table>
{% end %}